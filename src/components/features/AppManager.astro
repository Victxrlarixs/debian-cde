---
import WindowControls from '../common/WindowControls.astro';
---

<div class="cde-retro-modal app-manager-window" id="appManager" data-no-maximize="true">
  <div class="titlebar" id="appManagerTitlebar" onmousedown="window.drag(event, 'appManager')">
    <span class="titlebar-text">Application Manager - /usr/dt/appconfig/appmanager</span>
    <WindowControls windowId="appManager" closeFunction="appManager.close" disableMaximize={true} />
  </div>

  <div class="modal-body app-manager-body">
    <div class="app-grid">
      <!-- Terminal -->
      <div class="app-item" onclick="openTerminal(); appManager.close()">
        <img src="/icons/konsole.png" alt="Terminal" />
        <span>Terminal (Auto)</span>
      </div>

      <!-- Terminal Lab -->
      <div class="app-item" onclick="TerminalLab.open(); appManager.close()">
        <img src="/icons/computer.png" alt="Terminal Lab" />
        <span>Terminal Lab</span>
      </div>

      <!-- File Manager -->
      <div class="app-item" onclick="toggleFileManager(); appManager.close()">
        <img src="/icons/filemanager.png" alt="File Manager" />
        <span>File Manager</span>
      </div>

      <!-- Style Manager -->
      <div class="app-item" onclick="styleManager.openMain(); appManager.close()">
        <img src="/icons/org.xfce.settings.appearance.png" alt="Style Manager" />
        <span>Style Manager</span>
      </div>

      <!-- Audio Manager -->
      <div class="app-item" onclick="styleManager.openBeep(); appManager.close()">
        <img src="/icons/multimedia-volume-control.png" alt="Audio Manager" />
        <span>Audio Setup</span>
      </div>

      <!-- Process Monitor -->
      <div class="app-item" onclick="openTaskManagerInTerminal(); appManager.close()">
        <img src="/icons/org.xfce.taskmanager.png" alt="Process Monitor" />
        <span>Process Monitor</span>
      </div>

      <!-- Calendar -->
      <div class="app-item" onclick="openCalendar(); appManager.close()">
        <img src="/icons/calendar.png" alt="Calendar" />
        <span>Calendar</span>
      </div>

      <!-- Clock -->
      <div class="app-item" onclick="timeManager.open(); appManager.close()">
        <img src="/icons/gtkclocksetup.png" alt="Clock" />
        <span>Clock</span>
      </div>

      <!-- Text Editor -->
      <div class="app-item" onclick="window.TextEditor?.open(); appManager.close()">
        <img src="/icons/gedit.png" alt="Text Editor" />
        <span>Text Editor</span>
      </div>

      <!-- Screenshot -->
      <div class="app-item" onclick="captureFullPageScreenshot(); appManager.close()">
        <img src="/icons/org.xfce.screenshooter.png" alt="Screenshot" />
        <span>Screenshooter</span>
      </div>
    </div>
  </div>

  <div class="cde-statusbar">
    <div class="cde-statusleft">Application Manager</div>
    <div class="cde-statusright">10 Objects</div>
  </div>
</div>

<style>
  .app-manager-window {
    width: 480px;
    height: 380px;
    display: none;
    flex-direction: column;
    background-color: var(--modal-bg, #aeaeae);
  }

  .app-manager-body {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    background-color: var(--button-bg, #c0c0c0);
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.2);
    margin: 5px;
  }

  .app-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 15px;
    justify-items: center;
  }

  .app-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 8px;
    padding: 8px;
    width: 80px;
    cursor: pointer;
    border: 1px solid transparent;
    transition: all 0.1s ease;
  }

  .app-item:hover {
    background-color: rgba(255, 255, 255, 0.3);
    border: 1px solid var(--border-light, #fff);
    box-shadow: 2px 2px 0 var(--shadow-color, #000);
  }

  .app-item:active {
    background-color: rgba(0, 0, 0, 0.1);
    box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.5);
    transform: translate(1px, 1px);
  }

  .app-item img {
    width: 32px;
    height: 32px;
    image-rendering: pixelated;
  }

  .app-item span {
    font-size: 10px;
    font-family: var(--font-family-base, monospace);
    color: var(--text-main, #000);
    word-break: break-word;
    line-height: 1.1;
  }
</style>
