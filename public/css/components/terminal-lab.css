/* Terminal Laboratory */
#terminal-lab {
  position: absolute;
  width: min(820px, 95vw);
  height: min(520px, 80vh);
  max-width: 95vw;
  max-height: calc(100vh - 100px);
  display: none;
  flex-direction: column;
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-base);
}

/* Lesson progress bar */
#lab-progress-bar-wrapper {
  background: var(--dock-color);
  border-bottom: 2px solid;
  border-bottom-color: var(--border-dark);
  padding: 3px 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-small);
  color: var(--text-color);
}

#lab-lesson-label {
  white-space: nowrap;
  flex: 1;
}

#lab-progress-track {
  width: 180px;
  height: 10px;
  background: var(--window-color);
  border: 2px solid;
  border-top-color: var(--border-inset-dark);
  border-left-color: var(--border-inset-dark);
  border-right-color: var(--border-inset-light);
  border-bottom-color: var(--border-inset-light);
  flex-shrink: 0;
}

#lab-progress-fill {
  height: 100%;
  width: 0%;
  background: var(--titlebar-color);
  transition: width 0.3s steps(12, end);
}

/* Hint banner */
#lab-hint-banner {
  background: var(--button-bg);
  border-bottom: 2px solid;
  border-bottom-color: var(--border-dark);
  padding: 3px 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-small);
  color: var(--text-color);
  gap: 8px;
}

#lab-hint-text {
  flex: 1;
}

#lab-hint-controls {
  display: flex;
  gap: 3px;
}

#lab-hint-controls button {
  padding: 1px 8px;
  background: var(--button-bg);
  color: var(--text-color);
  border: 2px solid;
  border-top-color: var(--border-light);
  border-left-color: var(--border-light);
  border-right-color: var(--border-dark);
  border-bottom-color: var(--border-dark);
  font-family: var(--font-family-base);
  font-size: var(--font-size-small);
  cursor: pointer;
}

#lab-hint-controls button:active,
#lab-hint-controls button.lab-btn-active {
  border-top-color: var(--border-dark);
  border-left-color: var(--border-dark);
  border-right-color: var(--border-light);
  border-bottom-color: var(--border-light);
  background: var(--button-active);
}

/* Terminal output */
#terminal-lab .terminal-body {
  flex: 1;
  background: var(--terminal-bg-color);
  color: var(--terminal-text-color);
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-base);
  padding: 8px 10px;
  overflow-y: auto;
  min-height: 300px;
  line-height: var(--line-height-base);
}

/* Semantic text classes */
.lab-line {
  white-space: pre-wrap;
  word-break: break-all;
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  min-height: 1.45em;
  color: var(--terminal-text-color);
}

.lab-prompt-str {
  color: var(--scrollbar-color);
}

.lab-dim {
  opacity: 0.55;
}

.lab-header {
  color: var(--titlebar-color);
}

.lab-cmd {
  color: var(--terminal-text-color);
  font-weight: var(--font-weight-bold);
  text-decoration: underline;
}

.lab-output {
  opacity: 0.85;
}

.lab-error {
  color: #cc4444;
}

.lab-hint {
  color: var(--titlebar-color);
}

/* Input line */
#lab-input-line {
  display: flex;
  align-items: center;
  background: var(--terminal-bg-color);
  color: var(--terminal-text-color);
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-base);
  padding: 4px 10px;
  border-top: 2px solid var(--border-dark);
}

#lab-prompt {
  color: var(--scrollbar-color);
  margin-right: 6px;
  white-space: nowrap;
}

#lab-input {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--terminal-text-color);
  font-family: var(--font-family-terminal);
  font-size: var(--font-size-base);
  outline: none;
  caret-color: var(--terminal-text-color);
}
